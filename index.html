<!DOCTYPE html>
<html>
<head>
    <title>Salesforce Query Site</title>
</head>
<body>
    <h1>Connect to Salesforce</h1>
    <form id="salesforce-login-form">
        <select id="salesforce-environment">
            <option value="https://login.salesforce.com">Production</option>
            <option value="https://test.salesforce.com">Sandbox</option>
        </select>
        <button type="submit">Login with Salesforce</button>
    </form>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const loginForm = document.getElementById('salesforce-login-form');
        const environmentSelect = document.getElementById('salesforce-environment');
      
        loginForm.addEventListener('submit', async function(event) {
            event.preventDefault();
            
            try {
                const selectedEnvironment = environmentSelect.value;
                
                // Replace these with your actual Salesforce app details
                const clientId = process.env.SALESFORCE_CLIENT_ID;
                const redirectUri = encodeURIComponent(process.env.SALESFORCE_CALLBACK_URL);
                
                const authorizationUrl = `${selectedEnvironment}/services/oauth2/authorize?response_type=code&client_id=${clientId}&redirect_uri=${redirectUri}`;
                
                console.log('Authorization URL:', authorizationUrl);
                window.location.href = authorizationUrl;
            } catch (error) {
                console.error('Error:', error);
            }
        });
    });
    </script>
</body>
</html>